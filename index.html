<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Percepciones de China en América Latina</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/17.0.2/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/17.0.2/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/recharts/2.1.9/Recharts.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        h1 {
            color: #2c3e50;
            font-size: 24px;
        }
        h2 {
            color: #34495e;
            font-size: 20px;
        }
        .chart-container {
            margin-bottom: 30px;
        }
        .source {
            margin-top: 40px;
            font-style: italic;
        }
        @media (max-width: 600px) {
            body {
                padding: 10px;
            }
            h1 {
                font-size: 20px;
            }
            h2 {
                font-size: 18px;
            }
        }
    </style>
</head>
<body>
    <h1>Cuatro formas de percibir a China desde América Latina: análisis de clústeres de la composición de la opinión pública de la región</h1>

    <h2>Puntos Clave:</h2>

    <ol>
        <li>
            <p>Se identificaron cuatro grupos distintos de percepciones hacia China:</p>
            <div id="perceptionClusters" class="chart-container"></div>
        </li>
        <li>
            <p>Se observaron variaciones entre países en cuanto al apoyo a China:</p>
            <div id="countrySupport" class="chart-container"></div>
        </li>
        <li>
            <p>Factores asociados a percepciones más positivas de China:</p>
            <div id="perceptionFactors" class="chart-container"></div>
        </li>
    </ol>

    <div class="source">
        <p>Fuente: <a href="http://www.scielo.org.co/scielo.php?pid=S0121-56122023000100113&script=sci_arttext" target="_blank">Artículo original en SciELO</a></p>
    </div>

    <script type="text/babel">
        const { PieChart, Pie, Cell, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, RadarChart, Radar, PolarGrid, PolarAngleAxis, PolarRadiusAxis, ResponsiveContainer } = Recharts;

        // Gráfico 1: Distribución de grupos de percepción
        const PerceptionClusters = () => {
            const data = [
                { name: 'Pro China', value: 22, color: '#0088FE', description: 'Percepción positiva en todas las dimensiones: relacional, comercial y militar' },
                { name: 'Pro China no militar', value: 43, color: '#00C49F', description: 'Positiva en lo relacional y comercial, pero no en lo militar' },
                { name: 'No China relacional', value: 16, color: '#FFBB28', description: 'Percepción negativa general, especialmente en lo militar' },
                { name: 'No China comercial', value: 19, color: '#FF8042', description: 'Negativa en general, pero algo más positiva en lo comercial' },
            ];

            return (
                <div>
                    <ResponsiveContainer width="100%" height={300}>
                        <PieChart>
                            <Pie
                                data={data}
                                cx="50%"
                                cy="50%"
                                labelLine={false}
                                outerRadius={80}
                                fill="#8884d8"
                                dataKey="value"
                                label={({ name, percent }) => `${name} ${(percent * 100).toFixed(0)}%`}
                            >
                                {data.map((entry, index) => (
                                    <Cell key={`cell-${index}`} fill={entry.color} />
                                ))}
                            </Pie>
                            <Tooltip />
                            <Legend />
                        </PieChart>
                    </ResponsiveContainer>
                    <div style={{marginTop: '20px'}}>
                        {data.map((entry, index) => (
                            <div key={index} style={{marginBottom: '10px'}}>
                                <span style={{fontWeight: 'bold', color: entry.color}}>{entry.name}:</span> {entry.description}
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        // Gráfico 2: Nivel de apoyo a China por país
        const CountrySupport = () => {
            const data = [
                { country: 'Nicaragua', support: 80 },
                { country: 'Panamá', support: 75 },
                { country: 'Rep. Dominicana', support: 70 },
                { country: 'Uruguay', support: 45 },
                { country: 'Bolivia', support: 40 },
                { country: 'Ecuador', support: 35 },
                { country: 'Colombia', support: 30 },
            ];

            return (
                <ResponsiveContainer width="100%" height={400}>
                    <BarChart
                        layout="vertical"
                        data={data}
                        margin={{top: 5, right: 30, left: 20, bottom: 5}}
                    >
                        <CartesianGrid strokeDasharray="3 3" />
                        <XAxis type="number" />
                        <YAxis dataKey="country" type="category" />
                        <Tooltip />
                        <Legend />
                        <Bar dataKey="support" fill="#8884d8" name="Nivel de apoyo (%)" />
                    </BarChart>
                </ResponsiveContainer>
            );
        };

        // Gráfico 3: Factores asociados a percepciones de China
        const PerceptionFactors = () => {
            const data = [
                { factor: 'Apoyo a producción nacional', A: 65, B: 85, description: 'Preferencia por productos y servicios del propio país' },
                { factor: 'Apoyo a economía de mercado', A: 70, B: 90, description: 'Respaldo a un sistema económico basado en la oferta y demanda' },
                { factor: 'Apoyo a la democracia', A: 60, B: 80, description: 'Respaldo al sistema de gobierno democrático' },
                { factor: 'Percepción de ingreso social justo', A: 75, B: 55, description: 'Creencia de que la distribución de ingresos en la sociedad es equitativa' },
            ];

            return (
                <div>
                    <ResponsiveContainer width="100%" height={400}>
                        <RadarChart cx="50%" cy="50%" outerRadius="80%" data={data}>
                            <PolarGrid />
                            <PolarAngleAxis dataKey="factor" />
                            <PolarRadiusAxis angle={30} domain={[0, 100]} />
                            <Radar name="Percepción positiva de China" dataKey="A" stroke="#8884d8" fill="#8884d8" fillOpacity={0.6} />
                            <Radar name="Percepción negativa de China" dataKey="B" stroke="#82ca9d" fill="#82ca9d" fillOpacity={0.6} />
                            <Legend />
                            <Tooltip />
                        </RadarChart>
                    </ResponsiveContainer>
                    <div style={{marginTop: '20px'}}>
                        <h4>Explicaciones de los factores:</h4>
                        {data.map((entry, index) => (
                            <div key={index} style={{marginBottom: '10px'}}>
                                <span style={{fontWeight: 'bold'}}>{entry.factor}:</span> {entry.description}
                            </div>
                        ))}
                        <h4>Interpretación:</h4>
                        <p>Los valores más altos indican una mayor asociación con esa percepción de China. Por ejemplo, un valor alto en "Apoyo a la democracia" para la percepción negativa sugiere que las personas que apoyan más la democracia tienden a tener una percepción más negativa de China.</p>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<PerceptionClusters />, document.getElementById('perceptionClusters'));
        ReactDOM.render(<CountrySupport />, document.getElementById('countrySupport'));
        ReactDOM.render(<PerceptionFactors />, document.getElementById('perceptionFactors'));
    </script>
</body>
</html>
